@import '../colors.scss';

$size: 20px;
$componentColor: document;

@mixin componentScroll() {
    cursor: auto;
    &::-webkit-scrollbar {
        width: 12px;
        height: 12px;
    }

    &::-webkit-scrollbar-track {
        @include color(second);
        visibility: visible;
        
        &:hover { visibility: visible; }
    }
        
    &::-webkit-scrollbar-thumb {
        @include colorInteract(main);
    }

    &::-webkit-scrollbar-corner {
        @include color(main);
    }
}

.main {
    @include color(forth);
    @include componentScroll();
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;

    & > .editGroup[data=default]:last-child  {
        margin-bottom: 120px;
    }
}

.editGroup {
    @include color(forth);
    display: flex;
    flex-direction: column;
    padding: 2px;
    white-space: nowrap;

    &[data=fill] {
        flex: 1;
        height: 100%;
        min-height: 200px;
    }

    & > .editGroupHeader {
        @include colorInteract(main);
        @include colorText();
        user-select: none;
        position: relative;
        cursor: pointer;
        font-size: large;
        font-weight: bold;
        padding: 1px 5px;
        overflow: hidden;

        &[data=open]::after {
            position: absolute;
            right: 5px;
            top: 0.5ch;
            border-color: transparent map-get($palette, text) transparent transparent;
            border-width: 6px;
            border-style: solid;
            content: " ";
        }
    
        &[data=closed]::after {
            position: absolute;
            right: -1px;
            top: 0.5ch;
            border-color: transparent transparent transparent map-get($palette, text);
            border-width: 6px;
            border-style: solid;
            content: " ";
        }
    }
}

.label {
    @include colorText();
    width: 120px;
    height: $size;
    flex-shrink: 0;
    font-size: 12px;
    display: flex;
    align-items: center;
    white-space: nowrap;
    user-select: none;
}

.editEditor {
    @include color($componentColor);
    @include componentScroll();
    padding-bottom: 50px !important;
}

.editInput {
    @include color($componentColor);
    @include colorText();
    min-width: 0;
    border: none;
    outline: none;
    font: inherit;
    font-size: small;
    padding: 0 5px;
    flex: 1;

    &[error=true] {
        @include color(error);
    }

    &::-webkit-inner-spin-button{
        appearance: none;
    }

    &::placeholder {
        @include colorText();
        opacity: 60%;
    }
}

.editText {
    display: flex;
    margin: 2px 0 2px 5px;
    height: $size;

    & > b { @extend .label; }

    & > input {
        @extend .editInput;
    }

    & > div {
        min-width: 0;
        border: none;
        outline: none;
        height: 100px;
        flex: 1;
    }

    & > a {
        color: map-get($palette, accents);
        display: flex;
        align-items: center;
        flex: 1;
        margin-left: 5px;
        padding-left: 5px;
        font-size: small;
        text-decoration: none;
        cursor: pointer;
        &:hover {
            text-decoration: underline;
        }
    }
}

.editTextArea {
    display: flex;
    margin: 2px 0 2px 5px;
    height: 100px;

    & > b { @extend .label; }

    & > div {
        min-width: 0;
        height: inherit;
        flex: 1;
    }

    & textarea {
        @include color($componentColor);
        @include componentScroll();
    }

    &[data=fill] {
        height: 100%;
    }
}

.editNumber {
    display: flex;
    margin: 2px 0 2px 5px;
    height: $size;

    & > b { @extend .label; }

    & > input {
        @extend .editInput;
    }
}

.editEnum {
    position: relative;
    display: flex;
    margin: 2px 0 2px 5px;
    flex-shrink: 0;
    height: $size;

    & > b { @extend .label; }
}

.dropdown {
    background: map-get($palette, $componentColor) !important;
    font: inherit;
    font-size: small;

    & > :first-child {
        & > * {
            &[data=true] {
                @include colorShadow();
            }
            
            & > * {
                padding: 0 5px;
                height: $size;
                
                &:not(:last-child) {
                    border-bottom: 1px solid map-get($palette, second);
                    padding-top: 1px;
                }
            }
        }
    }

    & > div:last-child {
        background: map-get($palette, main);
    }
}

.editSelection {
    display: flex;
    margin: 2px 0 2px 5px;
    flex-shrink: 0;

    & > b { @extend .label; }

    .selection {
        font: inherit;
        font-size: small;
        
        & > div:first-child {
            & > div:first-child {
                @extend .dropdown;
            }
        }

        & > div:last-child {
            @include componentScroll();
            @include color(forth);
            margin-top: 2px;
        }
    }
}

.editSelectionItem {
    @include colorText();
    @extend .editNumber;

    & > b { width: 120px; }
    & > input {
        @include color($componentColor);
    }
}

.editList {
    display: flex;
    margin: 2px 0 2px 5px;
    flex-shrink: 0;

    b { @extend .label; }

    .list {
        font: inherit;
        font-size: small;
        
        & > div:last-child {
            @include color(forth);
            @include componentScroll();
            margin-top: 2px;
            & > div {
                @include color($componentColor);
                filter: brightness(95%)
            }
        }

        input {
            @extend .editInput;
        }
    }
}

.editOption {
    display: flex;
    margin: 2px 0 2px 5px;
    height: $size;
    flex-shrink: 0;

    & > b { @extend .label; }
    
    & > div {
        display: flex;
        flex: 1;
        min-width: 0;
        
        & > div {
            width: 100px;
            flex: initial;
        }

        & > input {
            @include color($componentColor);
            @include colorText();
            min-width: 0;
            border: none;
            outline: none;
            font: inherit;
            font-size: small;
            padding: 0 5px;
            flex: 1;
    
            &[data=error] {
                @include color(error);
            }

            &:disabled {
                filter: brightness(90%);
                pointer-events: none;
            }
    
            &::-webkit-inner-spin-button{
                appearance: none;
            }
        }
    }
}

.editTemplateList {
    display: flex;
    margin: 2px 0 2px 5px;

    & > b { @extend .label; width: 60px; }
    
}

.editTemplateListMenu {
    flex-shrink: 0 !important;
    height: 130px * 4 !important;
    border-left: 2px solid map-get($palette, forth);
    padding-left: 5px;

    & > *:first-child {
        @include color(error);
        height: auto !important;
    }

    & > *:last-child {
        & > * {
            height: auto !important;
        }
    }
}

.checkbox {
    width: 20px;
    height: 20px;

    svg, div {
        @include color($componentColor);
    }
}

.loading {
    width: 100%;
    margin-top: 100px + 0.75cm !important;
    & svg {
        height: 0.85in;
    }
}