{
    "editor": {
        "type": "root",
        "content": [
            {
                "type": "group",
                "params": { "label": "Metadata", "open": true },
                "content": [
                    {
                        "type": "text", 
                        "params": { "label": "Name", "key": "name", "default": "Ability name" }
                    },
                    { 
                        "type": "publish", 
                        "params": { "label": "Publish" }
                    },
                    { 
                        "type": "enum", 
                        "params": { "label": "Ability Type", "key": "type", "type": "abilityType", "default": "feature" }
                    },
                    { 
                        "type": "enum", 
                        "params": { "label": "Action Type", "key": "action", "type": "action", "default": "action" }
                    },
                    { 
                        "type": "text", 
                        "conditions": [{ "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["meleeAttack", "meleeWeapon", "rangedAttack", "rangedWeapon", "thrownWeapon", "skill"] }] }],
                        "params": { "label": "Notes", "key": "notes" }
                    },
                    {
                        "type": "group",
                        "params": { "label": "Effect", "open": true },
                        "conditions": [{ "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["meleeAttack", "meleeWeapon", "rangedAttack", "rangedWeapon", "thrownWeapon", "skill"] }] }],
                        "content": [
                            { 
                                "type": "enum", 
                                "params": { "label": "Condition", "key": "condition", "type": "effectCondition", "default": "hit" }
                            },
                            { 
                                "type": "enum", 
                                "conditions": [{ "type": "equals", "value": [{ "type": "metadata", "value": "condition" }, "save"] }],
                                "params": { "label": "Save Attribute", "key": "saveAttr", "type": "attr", "default": "str" }
                            },
                            { 
                                "type": "enum", 
                                "params": { "label": "Damage Type", "key": "damageType", "type": "damageType", "default": "none" }
                            },
                            {
                                "type": "enum",
                                "conditions": [{ "type": "equals", "value": [{ "type": "metadata", "value": "type" }, "skill"] }],
                                "params": { "label": "Target", "key": "target", "type": "target", "default": "single" }
                            },
                            { 
                                "type": "number", 
                                "conditions": [
                                    { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["meleeAttack", "thrownWeapon", "meleeWeapon"] }] },
                                    { "type": "equals", "value": [{ "type": "metadata", "value": "target" }, "single"] }
                                ],
                                "params": { "label": "Reach", "key": "range" }
                            },
                            { 
                                "type": "number", 
                                "conditions": [
                                    { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["thrownWeapon"] }] },
                                    { "type": "equals", "value": [{ "type": "metadata", "value": "target" }, "single"] }
                                ],
                                "params": { "label": "Range", "key": "rangeThrown" }
                            },
                            { 
                                "type": "number", 
                                "conditions": [
                                    { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["rangedAttack", "rangedWeapon", "skill"] }] },
                                    { "type": "equals", "value": [{ "type": "metadata", "value": "target" }, "single"] }
                                ],
                                "params": { "label": "Range", "key": "range" }
                            },
                            { 
                                "type": "number", 
                                "conditions": [
                                    { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["rangedAttack", "rangedWeapon", "thrownWeapon"] }] },
                                    { "type": "equals", "value": [{ "type": "metadata", "value": "target" }, "single"] }
                                ],
                                "params": { "label": "Range (Long)", "key": "rangeLong" }
                            },
                            { 
                                "type": "text", 
                                "conditions": [{ "type": "equals", "value": [{ "type": "metadata", "value": "damageType" }, "none"] }],
                                "params": { "label": "Effect", "key": "effectText" }
                            },
                            {
                                "type": "group",
                                "params": { "label": "Condition Roll", "open": true },
                                "conditions": [{ "type": "notEquals", "value": [{ "type": "metadata", "value": "condition" }, "none"] }],
                                "content": [
                                    { 
                                        "type": "enum", 
                                        "params": { "label": "Scaling", "key": "conditionScaling", "type": "scaling", "default": "none" }
                                    },
                                    { 
                                        "type": "boolean", 
                                        "params": { "label": "Proficiency", "key": "conditionProficiency", "default": false }
                                    },
                                    { 
                                        "type": "option", 
                                        "params": { "label": "Modifier", "key": "conditionModifier", "type": "number" }
                                    }
                                ]
                            },
                            {
                                "type": "group",
                                "params": { "label": "Effect Roll", "open": true },
                                "conditions": [{ "type": "notEquals", "value": [{ "type": "metadata", "value": "damageType" },  { "type": "all", "value": ["none", "null"] }] }],
                                "content": [
                                    { 
                                        "type": "enum", 
                                        "params": { "label": "Scaling", "key": "effectScaling", "type": "scaling", "default": "none" }
                                    },
                                    { 
                                        "type": "boolean", 
                                        "params": { "label": "Proficiency", "key": "effectProficiency", "default": false }
                                    },
                                    { 
                                        "type": "boolean", 
                                        "params": { "label": "Versatile", "key": "versatile", "default": false }
                                    },
                                    { 
                                        "type": "option", 
                                        "params": { "label": "Modifier", "key": "effectModifier", "type": "number" }
                                    },
                                    {
                                        "type": "enum", 
                                        "params": { "label": "Dice", "key": "effectDice", "type": "dice", "default": 0 }
                                    },
                                    {
                                        "type": "enum", 
                                        "conditions": [{ "type": "equals", "value": [{ "type": "metadata", "value": "versatile" }, true] }],
                                        "params": { "label": "Versatile Dice", "key": "effectVersatileDice", "type": "dice", "default": 0 }
                                    },
                                    { 
                                        "type": "number", 
                                        "conditions": [{ "type": "notEquals", "value": [{ "type": "metadata", "value": "effectDice" }, { "type": "all", "value": [0, "0", null] }] }],
                                        "params": { "label": "Num Dice", "key": "effectDiceNum" }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "group",
                        "params": { "label": "Modifiers", "open": true },
                        "conditions": [{ "type": "equals", "value": [{ "type": "metadata", "value": "type" }, "feature"] }],
                        "content": [
                            {
                                "type": "itemList",
                                "params": { 
                                    "label": "Modifiers", 
                                    "key": "modifiers", 
                                    "prompt": "Edit", 
                                    "placeholder": "Enter Name" ,
                                    "default": [], 
                                    "template": "modifier"
                                }
                            }
                        ]
                    }
                ]
            },
            {
                "type": "group",
                "params": { "label": "Content", "open": true, "fill": true },
                "content": [
                    {
                        "type": "textarea",
                        "params": { "label": "Description", "key": "description", "fill": true  }
                    }
                ]
            }
        ]
    },
    "editorSubTemplates": {
        "modifier": {
            "type": "root",
            "content": [
                { "type": "navigation" },
                {
                    "type": "group",
                    "params": { "label": "Modifiers", "open": true },
                    "content": [
                        { 
                            "type": "enum", 
                            "params": { "label": "Type", "key": "type", "type": "modifierType", "default": "bonus" }
                        },
                        { 
                            "type": "enum", 
                            "params": { "label": "Condition", "key": "condition", "type": "modifierCondition", "default": "none" }
                        },
                        { 
                            "type": "enum", 
                            "conditions": [{ "type": "equals", "value": [{ "type": "metadata", "value": "type" }, "bonus"] }],
                            "params": { "label": "Property", "key": "bonusProperty", "type": "modifierBonusTypeProperty", "default": "ac" }
                        },
                        { 
                            "type": "enum", 
                            "conditions": [{ "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] }],
                            "params": { "label": "Property", "key": "addRemoveProperty", "type": "modifierAddRemoveTypeProperty", "default": "proficiency" }
                        },
                        { 
                            "type": "enum", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] }
                            ],
                            "params": { "label": "Proficiency Type", "key": "proficiency", "type": "proficiencyType", "default": "armor" }
                        },
                        { 
                            "type": "enum", 
                            "conditions": [{ "type": "equals", "value": [{ "type": "metadata", "value": "type" }, "add"] }],
                            "params": { "label": "Modifier Type", "key": "select", "type": "modifierSelect", "default": "value" }
                        },
                        { 
                            "type": "text", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "choice"] }
                            ],
                            "params": { "label": "Choice Label", "key": "label", "placeholder": "Modifier..." }
                        },
                        { 
                            "type": "boolean", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, "add"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "ability"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "choice"] }
                            ],
                            "params": { "label": "Allow Any", "key": "allowAny" }
                        },
                        { 
                            "type": "number", 
                            "conditions": [{ "type": "equals", "value": [{ "type": "metadata", "value": "type" }, "bonus"] }],
                            "params": { "label": "Value", "key": "value" }
                        },

                        { 
                            "type": "enum", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "proficiency" }, "armor"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "value"] }
                            ],
                            "params": { "label": "Armor", "key": "armor", "type": "armor" }
                        }, { 
                            "type": "selection", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "proficiency" }, "armor"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "choice"] }
                            ],
                            "params": { "label": "Options", "key": "armors", "enum": "armor", "fill": true }
                        },

                        { 
                            "type": "enum", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "proficiency" }, "weapon"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "value"] }
                            ],
                            "params": { "label": "Weapon", "key": "weapon", "type": "weapon" }
                        }, { 
                            "type": "selection", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "proficiency" }, "weapon"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "choice"] }
                            ],
                            "params": { "label": "Options", "key": "weapons", "enum": "weapon", "fill": true }
                        },

                        { 
                            "type": "enum", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "proficiency" }, "tool"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "value"] }
                            ],
                            "params": { "label": "Tool", "key": "tool", "type": "tool" }
                        }, { 
                            "type": "selection", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "proficiency" }, "tool"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "choice"] }
                            ],
                            "params": { "label": "Options", "key": "tools", "enum": "tool", "fill": true }
                        },

                        { 
                            "type": "enum", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "proficiency" }, "language"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "value"] }
                            ],
                            "params": { "label": "Language", "key": "language", "type": "language" }
                        }, { 
                            "type": "selection", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "proficiency" }, "language"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "choice"] }
                            ],
                            "params": { "label": "Options", "key": "languages", "enum": "language", "fill": true }
                        },

                        { 
                            "type": "enum", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "proficiency" }, "save"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "value"] }
                            ],
                            "params": { "label": "Save", "key": "save", "type": "attr" }
                        }, { 
                            "type": "selection", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "proficiency" }, "save"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "choice"] }
                            ],
                            "params": { "label": "Options", "key": "saves", "enum": "attr", "fill": true }
                        },
                        
                        { 
                            "type": "enum", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "proficiency" }, "skill"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "value"] }
                            ],
                            "params": { "label": "Skill", "key": "skill", "type": "skill" }
                        }, { 
                            "type": "selection", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "proficiency"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "proficiency" }, "skill"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "choice"] }
                            ],
                            "params": { "label": "Options", "key": "skills", "enum": "skill", "fill": true }
                        },
                        
                        { 
                            "type": "linkInput", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "ability"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "value"] }
                            ],
                            "params": { "label": "Ability", "key": "file", "placeholder": "Ability id...", "fileTypes": ["abi"] }
                        }, { 
                            "type": "linkList", 
                            "conditions": [
                                { "type": "equals", "value": [{ "type": "metadata", "value": "type" }, { "type": "any", "value": ["add", "remove"] }] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "addRemoveProperty" }, "ability"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "select" }, "choice"] },
                                { "type": "equals", "value": [{ "type": "metadata", "value": "allowAny" }, false] }
                            ],
                            "params": { "label": "Options", "key": "files", "fill": true, "fileTypes": ["abi"], "placeholder": "Ability file ID ..." }
                        }
                    ]
                }
            ]
        }
    },
    "renderer": { "type": "abi" }
}